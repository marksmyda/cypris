<div>Query</div>
<input type="text" (input)="onQueryChange($event)" placeholder="Enter search query" size="200">

<div>Limit</div>
<input type="text" (input)="onLimitChange($event)" placeholder="Limit results" size="10" [formControl]="numericControl">

<div class="card flex justify-center">
    <p-button (click)="fetch()" label="Check" />
</div>
<!-- <p-progressspinner aria-label="Loading"></p-progressspinner> -->
<p-table [value]="[data]">
    <ng-template pTemplate="header">
        <tr>
          <th>Total Hits</th>
          <th>Limit</th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-data>
        <tr>
          <td>{{ data.totalHits }}</td>
          <td>{{ data.limit }}</td>
        </tr>
    </ng-template>
</p-table>

<p-table [value]="data.results" stripedRows [paginator]="true" [rows]="10" [rowsPerPageOptions]="[5, 10, 20]" [customSort]="true" (sortFunction)="customSort($event)">
    <ng-template pTemplate="header">
        <tr>
            <th pSortableColumn="title">Title <p-sortIcon field="title" /></th>
            <th pSortableColumn="getDateFromString">Published Date <p-sortIcon field="getDateFromString" /></th>
            <th>Authors</th>
            <th pSortableColumn="publisher">Publisher <p-sortIcon field="publisher" /></th>
            <th pSortableColumn="citationCount">Citations <p-sortIcon field="citationCount" /></th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-result>
        <tr>
            <td>{{ result.title }}</td>
            <td>{{ getDateFromString(result) }}</td>
            <td>{{ getAuthorNames(result) }}</td>
            <td>{{ result.publisher }}</td>
            <td>{{ result.citationCount }}</td>
        </tr>
    </ng-template>
</p-table>

<div class="chart-container" style="max-width: 500px;">
    <p-chart type="doughnut" [data]="fieldData" class="w-full md:w-[30rem]" />
</div>
